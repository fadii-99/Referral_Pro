import{u as $,r as h,R as I,j as t}from"./index-Bq8Ch-IH.js";import{S as k}from"./SideDesign-DZqJMr1X.js";import{B as M}from"./Button-CXH0O0F1.js";import{M as R}from"./MultiStepHeader-CsvSsoKu.js";const B={starter:0,growth:1},b={starter:{name:"Starter",seatsLabel:"5 seats",baseSeats:5,monthlyPrice:99},growth:{name:"Growth",seatsLabel:"25 seats",baseSeats:25,monthlyPrice:299}},f=c=>`$${Math.round(c).toLocaleString()}`,A=c=>Math.round(c*12*.9);function j(c,m,u){if(c==="custom"){const y=(u||5)*20,g=m==="monthly"?y:m==="yearly"?y*12:0;return{total:g,display:g?`${f(g)}${m==="monthly"?"/mon":"/yr"}`:"—",currency:"USD"}}const n=b[c],i=Math.ceil(n.monthlyPrice/n.baseSeats)*n.baseSeats-1,x=m==="monthly"?i:m==="yearly"?A(i):0;return{total:x,display:x?`${f(x)}${m==="monthly"?"/mon":"/yr"}`:"—",currency:"USD"}}const U=()=>{const c=$(),m=h.useContext(I);if(!m)throw new Error("SubscriptionPlan must be used within RegistrationProvider");const{registrationData:u,setRegistrationData:n}=m,[i,x]=h.useState(u.subscriptionBilling||"monthly"),[s,y]=h.useState(u.subscriptionPlanId),[g]=h.useState("stripe"),[o,T]=h.useState(u.subscriptionPlanId===3&&u.subscriptionSeats||5),[p,N]=h.useState(u.subscriptionPlanId===3?u.subscriptionBilling:""),v=e=>{if(s===null||s===3){y(0),x(e);const a=j("starter",e);n(d=>({...d,subscriptionBilling:e,subscriptionPlanId:0,subscriptionSeats:b.starter.baseSeats,subscriptionCurrency:a.currency,subscriptionTotal:a.total,subscriptionTotalDisplay:a.display}));return}x(e);const l=j(s===0?"starter":"growth",e);n(a=>({...a,subscriptionBilling:e,subscriptionPlanId:s,subscriptionSeats:s===0?b.starter.baseSeats:b.growth.baseSeats,subscriptionCurrency:l.currency,subscriptionTotal:l.total,subscriptionTotalDisplay:l.display}))},w=e=>{N(e);const r=j("custom",e,o);n(l=>({...l,subscriptionBilling:e,subscriptionPlanId:3,subscriptionSeats:o,subscriptionCurrency:r.currency,subscriptionTotal:r.total,subscriptionTotalDisplay:r.display}))},S=e=>{if(e==="custom"){y(3),N(""),n(d=>({...d,subscriptionPlanId:3,subscriptionSeats:o,subscriptionBilling:"",subscriptionCurrency:"USD",subscriptionTotal:0,subscriptionTotalDisplay:"—"}));return}const r=B[e],l=b[e].baseSeats,a=j(e,i);y(r),n(d=>({...d,subscriptionBilling:i,subscriptionPlanId:r,subscriptionSeats:l,subscriptionCurrency:a.currency,subscriptionTotal:a.total,subscriptionTotalDisplay:a.display}))},D=()=>{s!==null&&(s===3&&(!o||!p)||c("/PaymentMethod"))},P=({id:e})=>{const r=b[e],l=j(e,i),a=B[e],d=s===a;return t.jsxs("button",{type:"button",onClick:()=>S(e),className:["relative w-full rounded-2xl sm:px-5 px-3 sm:py-6 py-4 text-left border transition-shadow",d?"bg-primary-purple text-white border-primary-purple shadow-lg":"bg-white text-primary-blue border-primary-blue/20 hover:shadow-md","shadow-[0_8px_28px_rgba(0,0,0,0.08)]"].join(" "),children:[t.jsxs("div",{className:"flex items-start justify-between",children:[t.jsxs("div",{children:[t.jsx("div",{className:"text-sm font-semibold opacity-90",children:r.name}),t.jsx("div",{className:"mt-1 text-[11px] opacity-70",children:r.seatsLabel})]}),t.jsx("div",{className:["w-5 h-5 rounded-full border flex items-center justify-center",d?"border-white bg-white/20":"border-primary-blue/30"].join(" "),"aria-hidden":!0,children:d?t.jsx("span",{className:"w-2.5 h-2.5 rounded-full bg-white"}):null})]}),t.jsxs("div",{className:"mt-4",children:[t.jsx("span",{className:"text-3xl font-bold tracking-tight",children:f(l.total)}),t.jsx("span",{className:"ml-1 text-sm opacity-80",children:i==="monthly"?"/mon":"/yr"})]}),t.jsx("div",{className:"mt-2 text-xs opacity-70",children:i==="yearly"?"10% off with annual prepayment":`~${f(Math.ceil(r.monthlyPrice/r.baseSeats))}/seat baseline`})]})},C=({label:e,selected:r,onClick:l})=>t.jsx("button",{type:"button",onClick:l,className:["w-full rounded-xl sm:px-4 px-3 py-3 border text-left transition-all",r?"bg-white border-primary-purple ring-2 ring-primary-purple/30":"bg-white border-primary-blue/20 hover:shadow-sm"].join(" "),children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("div",{className:"sm:text-sm text-xs font-semibold text-primary-blue",children:e}),t.jsx("div",{className:["w-5 h-5 rounded-full border flex items-center justify-center",r?"border-primary-purple":"border-primary-blue/30"].join(" "),children:r?t.jsx("span",{className:"w-2.5 h-2.5 rounded-full bg-primary-purple"}):null})]})});return t.jsxs("div",{className:"grid md:grid-cols-5 w-full min-h-screen",children:[t.jsx(k,{}),t.jsxs("div",{className:"md:col-span-3 flex flex-col bg-[#F4F2FA]",children:[t.jsx("div",{className:"sticky top-5 z-30 backdrop-blur w-full max-w-lg mx-auto",children:t.jsx("div",{className:"px-4",children:t.jsx(R,{title:"Subscription Plan",current:5,total:6,onBack:()=>c(-1)})})}),t.jsx("div",{className:"flex-1 flex items-center justify-center px-4 sm:mt-0 mt-6",children:t.jsxs("div",{className:"w-full max-w-lg",children:[t.jsxs("div",{className:"flex items-center gap-6 text-sm font-semibold text-primary-blue mb-3",children:[t.jsxs("button",{type:"button",onClick:()=>v("monthly"),className:`relative pb-2 ${i==="monthly"&&s!==3?"text-primary-purple":"text-primary-blue/70"}`,children:["Monthly",i==="monthly"&&s!==3&&t.jsx("span",{className:"absolute left-0 -bottom-[2px] h-0.5 w-full bg-primary-purple rounded-full"})]}),t.jsxs("button",{type:"button",onClick:()=>v("yearly"),className:`relative pb-2 ${i==="yearly"&&s!==3?"text-primary-purple":"text-primary-blue/70"}`,children:["Yearly",i==="yearly"&&s!==3&&t.jsx("span",{className:"absolute left-0 -bottom-[2px] h-0.5 w-full bg-primary-purple rounded-full"})]}),t.jsxs("button",{type:"button",onClick:()=>S("custom"),className:`relative pb-2 ${s===3?"text-primary-purple":"text-primary-blue/70"}`,children:["Custom",s===3&&t.jsx("span",{className:"absolute left-0 -bottom-[2px] h-0.5 w-full bg-primary-purple rounded-full"})]})]}),s===3&&t.jsxs("div",{className:"mb-4",children:[t.jsx("h4",{className:"text-sm font-semibold text-primary-blue mb-2 mt-6",children:"Select custom seats"}),t.jsx("label",{className:"block text-xs text-primary-blue/70 mb-1",children:"Per seat: $20"}),t.jsx("input",{type:"range",min:5,max:500,step:5,value:o,onChange:e=>{const r=Number(e.target.value);T(r);const l=j("custom",p,r);n(a=>({...a,subscriptionSeats:r,subscriptionTotal:l.total,subscriptionTotalDisplay:l.display,subscriptionCurrency:l.currency,subscriptionPlanId:3,subscriptionBilling:p}))},className:"w-full accent-primary-purple"}),t.jsxs("div",{className:"flex justify-between text-xs text-primary-blue font-semibold mt-1 mb-6",children:[t.jsxs("span",{children:["Seats: ",o]}),t.jsxs("span",{children:["Total:"," ",p==="monthly"?`$${o*20}/mon`:p==="yearly"?`$${o*20*12}/yr`:"—"]})]}),t.jsxs("div",{className:"mt-4",children:[t.jsx("div",{className:"text-xs text-primary-blue font-semibold mb-2",children:"Duration"}),t.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[t.jsx(C,{type:"monthly",label:"Monthly",selected:p==="monthly",onClick:()=>w("monthly")}),t.jsx(C,{type:"yearly",label:"Yearly",selected:p==="yearly",onClick:()=>w("yearly")})]})]})]}),s!==3&&t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsx(P,{id:"starter"}),t.jsx(P,{id:"growth"})]}),t.jsxs("div",{className:"mt-6",children:[t.jsx("div",{className:"text-xs text-primary-blue font-semibold mb-2",children:"Payment method"}),t.jsx("div",{className:"grid grid-cols-1 gap-3",children:t.jsx("div",{className:"w-full rounded-xl sm:px-4 px-3 py-3 border bg-white border-primary-purple ring-2 ring-primary-purple/30",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("div",{className:"sm:text-sm text-xs font-semibold text-primary-blue",children:"Stripe"}),t.jsx("div",{className:"w-5 h-5 rounded-full border border-primary-purple flex items-center justify-center",children:t.jsx("span",{className:"w-2.5 h-2.5 rounded-full bg-primary-purple"})})]})})})]}),t.jsxs("div",{className:"mt-6",children:[t.jsx("div",{className:"text-xs text-primary-blue font-semibold mb-2",children:"Your selection"}),t.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[t.jsx("div",{className:"text-primary-blue/80",children:"Billing"}),t.jsx("div",{className:"text-right text-primary-blue font-semibold",children:s===3?p||"—":i}),t.jsx("div",{className:"text-primary-blue/80",children:"Plan"}),t.jsx("div",{className:"text-right text-primary-blue font-semibold",children:s===0?"Starter":s===1?"Growth":"Custom"}),t.jsx("div",{className:"text-primary-blue/80",children:"Seats"}),t.jsx("div",{className:"text-right text-primary-blue font-semibold",children:s===3?`Custom seats (${o})`:s===null?"—":s===0?b.starter.baseSeats:b.growth.baseSeats}),t.jsx("div",{className:"text-primary-blue/80",children:"Payment"}),t.jsx("div",{className:"text-right text-primary-blue font-semibold",children:g}),t.jsx("div",{className:"text-primary-blue/80",children:"Amount"}),t.jsx("div",{className:"text-right text-primary-blue font-semibold",children:u.subscriptionTotalDisplay||"—"})]})]}),t.jsx("div",{className:"mt-6",children:t.jsx(M,{text:"Next Add Card Details",onClick:D,disabled:s===null||s===3&&(!o||!p)})})]})})]})]})};export{U as default};
