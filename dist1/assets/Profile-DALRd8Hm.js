import{g as N,r as l,j as e,k as U,w as E,l as L,x as v,n as w,a as R,y as o,S as A}from"./index-Dmpxiuzc.js";import{B as k}from"./Button-ixi0jEF3.js";/* empty css                      */const B="/api",O=({open:s,onClose:i})=>{const{user:t,loadUser:n}=N(),[c,m]=l.useState(t?.name||""),[x,p]=l.useState(t?.phone||""),[F,u]=l.useState(t?.avatar||""),[h,f]=l.useState(null),j=l.useRef(null),[b,g]=l.useState(!1);if(l.useEffect(()=>{s&&(m(t?.name||""),p(t?.phone||""),u(t?.avatar||""),f(null))},[s,t]),!s)return null;const P=()=>j.current?.click(),C=a=>{const r=a.target.files?.[0];r&&(f(r),u(URL.createObjectURL(r)))},S=async()=>{if(!c.trim()){o.error("Name is required!");return}g(!0);try{const a=localStorage.getItem("accessToken"),r=new FormData;r.append("full_name",c.trim()),r.append("phone",x.trim()),h&&r.append("image",h);const d=await fetch(`${B}/auth/update_user/`,{method:"POST",headers:{Authorization:a?`Bearer ${a}`:""},body:r}),y=await d.json();if(console.log("[update-user] response:",y),!d.ok){o.error(y?.error||`Failed (${d.status})`);return}o.success("Profile updated successfully!"),await n(),i()}catch(a){console.error("[update-user] error:",a),o.error("Network error while updating profile.")}finally{g(!1)}};return e.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/30 backdrop-blur-[1px] p-4",children:[e.jsxs("div",{className:"w-full max-w-2xl bg-white rounded-3xl shadow-xl relative",children:[e.jsxs("div",{className:"flex items-center justify-between px-6 pt-6",children:[e.jsx("h3",{className:"text-2xl font-semibold text-primary-blue",children:"Edit Profile"}),e.jsx("button",{onClick:i,"aria-label":"Close",className:"h-8 w-8 rounded-full bg-white border border-black/5 shadow-sm grid place-items-center hover:shadow transition",children:e.jsx(U,{className:"text-primary-purple"})})]}),e.jsxs("div",{className:"px-6 mt-3 flex flex-col items-center",children:[e.jsx("img",{src:F,alt:"avatar",className:"h-24 w-24 rounded-full object-cover ring-2 ring-white shadow"}),e.jsxs("button",{type:"button",onClick:P,className:"mt-2 inline-flex items-center gap-1 text-[11px] px-3 py-2 rounded-full bg-secondary-blue text-white font-light shadow",children:[e.jsx(E,{className:"text-white mr-1"}),"Change Photo"]}),e.jsx("input",{ref:j,type:"file",accept:"image/*",className:"hidden",onChange:C})]}),e.jsxs("div",{className:"px-6 pb-6 pt-4 space-y-5",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs text-primary-blue font-medium mb-2",children:["Full Name",e.jsx("span",{className:"text-rose-500",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-6 top-1/2 -translate-y-1/2 text-primary-purple",children:e.jsx(L,{className:"h-5 w-5"})}),e.jsx("input",{type:"text",value:c,onChange:a=>m(a.target.value),className:"w-full pl-14 pr-4 py-5 rounded-full bg-white border border-gray-200 text-xs text-gray-800 placeholder-gray-400 outline-none"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-primary-blue font-medium mb-2",children:"Phone"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-6 top-1/2 -translate-y-1/2 text-primary-purple",children:e.jsx(v,{className:"h-5 w-5"})}),e.jsx("input",{type:"tel",value:x,onChange:a=>p(a.target.value),className:"w-full pl-14 pr-4 py-5 rounded-full bg-white border border-gray-200 text-xs text-gray-800 placeholder-gray-400 outline-none"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-primary-blue font-medium mb-2",children:"Email Address"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-6 top-1/2 -translate-y-1/2 text-primary-purple",children:e.jsx(w,{className:"h-5 w-5"})}),e.jsx("input",{type:"email",value:t?.email||"",readOnly:!0,disabled:!0,className:"w-full pl-14 pr-4 py-5 rounded-full bg-gray-50 border border-gray-200 text-xs text-gray-500 cursor-not-allowed"})]})]}),e.jsx("div",{className:"pt-2",children:e.jsx(k,{text:b?"Updating...":"Update",fullWidth:!0,py:"py-5",mt:"mt-0",onClick:S,disabled:b})})]})]}),e.jsx(R,{position:"top-right",autoClose:3e3,hideProgressBar:!0})]})},T=()=>{const{user:s,loading:i}=N(),[t,n]=l.useState(!1);return i?e.jsx("div",{className:"flex justify-center items-center min-h-screen",children:e.jsx(A,{})}):s?e.jsxs("div",{className:"p-10",children:[e.jsx("div",{className:"bg-white rounded-2xl border border-black/5 shadow-sm sm:p-10 p-8 max-w-4xl mx-auto",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 md:gap-6 items-center",children:[e.jsx("div",{className:"flex items-center md:justify-start justify-center md:border-r col-span-1 md:pr-4 md:mb-0 mb-8",children:s.avatar&&e.jsx("img",{src:s.avatar,alt:s.name,className:"h-40 w-40 rounded-full object-cover ring-2 ring-white shadow"})}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("div",{className:"text-3xl font-semibold text-primary-blue",children:s.name}),e.jsxs("div",{className:"mt-3 flex flex-wrap items-center sm:gap-5 gap-3 sm:text-sm text-xs text-gray-500",children:[e.jsxs("span",{className:"inline-flex items-center gap-2",children:[e.jsx(w,{className:"text-primary-purple"}),s.email]}),s.phone&&e.jsxs("span",{className:"inline-flex items-center gap-2",children:[e.jsx(v,{className:"text-primary-purple"}),s.phone]})]}),e.jsx("div",{className:"mt-10",children:e.jsx(k,{text:"Edit Profile",onClick:()=>n(!0),fullWidth:!1,mt:"mt-0",py:"py-2 sm:py-3"})})]})]})}),e.jsx(O,{open:t,onClose:()=>n(!1)})]}):e.jsx("div",{className:"p-10 text-center text-gray-500",children:"Failed to load profile."})};export{T as default};
