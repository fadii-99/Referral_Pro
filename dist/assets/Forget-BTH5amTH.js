import{u as h,r as m,j as e}from"./index-C4Q7zlg9.js";import{S as y}from"./SideDesign-BzGKcu4p.js";import{B as j}from"./Button-DEuk-djm.js";import{m as N}from"./sms-DiCkCrsD.js";import{L as w,y as o}from"./ReactToastify-BEKem4ve.js";const b="/api/",C=()=>{const d=h(),[n,u]=m.useState({email:""}),[i,c]=m.useState(!1),p=r=>{const{name:l,value:a}=r.target;u(t=>({...t,[l]:a}))},g=async()=>{const r=n.email.trim();if(!r){o.error("Please enter your email");return}c(!0);const l=new FormData;l.append("email",r),localStorage.setItem("Email",r);try{const a=new URL(`${b}/auth/send_otp/`),t=await fetch(a.toString(),{method:"POST",body:l,cache:"no-store"}),x=t.headers.get("content-type")||"";let s=null;if(x.includes("application/json"))try{s=await t.json()}catch{s=null}else try{s=await t.text()}catch{s=null}if(!t.ok){console.groupCollapsed(`❌ send_otp failed ${t.status} ${t.statusText}`),console.log(typeof s=="string"?s:JSON.stringify(s,null,2)),console.groupEnd();const f=s&&(s.error||s.detail||s.message)||(t.status===404?"No account found with this email":"Failed to send OTP");o.error(f);return}console.groupCollapsed("✅ send_otp success"),console.log(typeof s=="string"?s:JSON.stringify(s,null,2)),console.groupEnd(),o.success(typeof s=="string"?"OTP sent":s?.message||"OTP sent"),d("/PasswordVerification",{state:{email:r}})}catch(a){console.error("Forgot password error:",a),o.error("Network error. Please try again.")}finally{c(!1)}};return e.jsxs("div",{className:"grid md:grid-cols-5 w-full min-h-screen",children:[e.jsx(y,{}),e.jsx("div",{className:"md:col-span-3 flex items-center justify-center px-4",children:e.jsxs("div",{className:"w-full max-w-lg",children:[e.jsxs("div",{className:"flex flex-col items-center gap-3 mb-8",children:[e.jsx("h1",{className:"text-primary-blue font-semibold sm:text-4xl text-3xl",children:"Forgot Password"}),e.jsx("p",{className:"text-xs text-gray-700 text-center",children:"Enter your email to receive a reset code"})]}),e.jsxs("form",{className:"flex flex-col gap-5",children:[e.jsxs("div",{className:"w-full",children:[e.jsxs("label",{htmlFor:"email",className:"block text-xs text-primary-blue font-medium mb-2",children:["Email Address",e.jsx("span",{className:"text-rose-500",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-8 top-1/2 -translate-y-1/2 pointer-events-none",children:e.jsx("img",{src:N,alt:"email",className:"h-5 w-5"})}),e.jsx("input",{id:"email",name:"email",type:"email",required:!0,placeholder:"Enter your email address",value:n.email,onChange:p,className:"w-full pl-16 pr-4 py-5 rounded-full bg-white border border-gray-200 text-xs outline-none text-gray-800 placeholder-gray-400 focus:ring-2 focus:ring-primary-blue/20 focus:border-primary-blue/50"})]})]}),e.jsx(j,{text:i?"Sending...":"Reset Password",onClick:g,disabled:i})]})]})}),e.jsx(w,{position:"top-right",autoClose:2e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0})]})};export{C as default};
